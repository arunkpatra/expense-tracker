<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

	<bean id="viewResolver"
		class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
		<property name="basename" value="views" />
		<property name="order" value="1" />
	</bean>
	<!-- If a JasperReports view requires more complex configuration then use 
		the BeanNameViewResolver to map a given view name to a given view bean -->
	<bean id="nameViewResolver"
		class="org.springframework.web.servlet.view.BeanNameViewResolver" />

	<!-- Here you can see that we have configured the JasperReportsPdfView class 
		with a Map containing the path to the sub-report file. The key used in the 
		Map corresponds to the key used for the sub-report inside the master report 
		file. -->
	<bean id="subReport"
		class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="url">
			<value>/WEB-INF/reports/subReportParent.jrxml</value>
		</property>
		<property name="subReportUrls">
			<map>
				<entry key="ProductsSubReport">
					<value>/WEB-INF/reports/subReportChild.jrxml</value>
				</entry>
			</map>
		</property>
		<property name="subReportDataKeys">
			<value>SubReportData</value>
		</property>
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
	</bean>

	<bean id="htmlReport"
		class="org.springframework.web.servlet.view.jasperreports.JasperReportsHtmlView">
		<property name="url">
			<value>/WEB-INF/reports/simpleReport.jrxml</value>
		</property>
		<property name="exporterParameters">
			<map>
				<entry
					key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.HTML_FOOTER">
					<value>Footer by Spring!&lt;/td&gt;&lt;td width="50%"&gt;&amp;nbsp;
						&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt; </value>
				</entry>
			</map>
		</property>
	</bean>

	<bean id="urlMapping"
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="order" value="1" />
		<property name="mappings">
			<props>
				<prop key="/**/*.pdf">controller</prop>
			</props>
		</property>
	</bean>

	<bean id="controller" class="com.exp.tracker.app.reports.ReportController">
		<property name="methodNameResolver">
			<ref local="resolver" />
		</property>
		<property name="settlementService">
			<ref bean="settlementService" />
		</property>
	</bean>

	<bean id="resolver"
		class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
		<property name="mappings">
			<props>
				<prop key="/settlementSubReport.pdf">handleSettlementSubReport</prop>
				<prop key="/expenseReport.pdf">handleExpenseReport</prop>
				<prop key="/simpleReport.pdf">handleSimpleReport</prop>
				<prop key="/simpleReportPost.pdf">handleSimpleReportPost</prop>
				<prop key="/simpleReportPost.action">handleSimpleReportPost</prop>
				<prop key="/simpleReportCompile.pdf">handleSimpleReportCompile</prop>
				<prop key="/simpleReportHtml.html">handleSimpleReportHtml</prop>
				<prop key="/simpleReportCsv.csv">handleSimpleReportCsv</prop>
				<prop key="/simpleReportExcel.xls">handleSimpleReportExcel</prop>
				<prop key="/simpleReportMulti.*">handleSimpleReportMulti</prop>
				<prop key="/subReport.pdf">handleSubReport</prop>
				<prop key="/exporterParameters.html">handleExporterParameters</prop>
			</props>
		</property>
	</bean>
</beans>